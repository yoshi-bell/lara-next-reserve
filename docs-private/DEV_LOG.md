# Rese 開発ログ (Development Log)

## 概要
このドキュメントは、「Rese（飲食店予約サービス）」の開発プロセス、技術的決定事項、および学習の軌跡を記録するものです。

---

## 2026-01-13: プロジェクト開始と初期設計

### 1. プロジェクトの目的と方針
*   **目的:** LaravelとNext.jsを用いた実践的なWebアプリケーション開発を通じて、モダンな開発フローを学習する。
*   **基本方針:**
    *   **フロントエンド(FE)とバックエンド(BE)の完全分離:** 疎結合なアーキテクチャを採用。
    *   **機能優先:** UIの装飾よりも、データの流れと機能の実装を最優先する。
    *   **画面逆算設計:** APIの仕様は、画面に必要なデータから逆算して決定する。

### 2. 環境構築
*   **ディレクトリ構成:**
    *   `laravel-next-app`: バックエンド (Laravel 12 + Sail)
    *   `next-frontend-app`: フロントエンド (Next.js App Router + Tailwind CSS)
    *   これらを `lara-next-reserve` ルートディレクトリ直下に並列配置（モノレポ構成）。
*   **構築手順:**
    1.  `curl` コマンドで Laravel Sail プロジェクトを作成。
    2.  `create-next-app` で Next.js プロジェクトを作成（TypeScript, ESLint, Tailwind 採用）。
    3.  `.git` フォルダを整理し、ルートディレクトリで一括管理するよう初期化。

### 3. 設計プロセス（要件定義〜DB設計）
*   **要件の洗い出し:**
    *   Googleスプレッドシート（要件定義書）の分析。
    *   コーチ要件（電話番号追加、予約制限など）の統合。
    *   UI画像（`yoyaku_ui`）の分析による、予約キャンセル機能やお気に入り機能の具体化。
*   **データベース設計の決定事項:**
    *   **Users:** 電話番号、性別、年齢カラムを追加。
    *   **Shops:** 予約制御用カラム（開始・終了時間、収容人数）を追加。
    *   **Reservations:**
        *   キャンセル機能のため、論理削除（`deleted_at`）を採用。
        *   **複合ユニーク制約:** `(user_id, date, time)` で同一ユーザーの同時間帯の重複登録を物理的に防止。
    *   **Favorites:** 中間テーブルを作成し、`(user_id, shop_id)` に複合ユニーク制約を設定。

### 4. Git運用ルール
*   **ドキュメント管理:**
    *   設計資料（CSV, 開発計画書）やこの開発ログは `docs-private/` に配置。
    *   `.gitignore` に追加し、リモートリポジトリには公開しない運用とする。
*   **コミット:**
    *   日本語のプレフィックス付きメッセージ（例: `feat:`, `docs:`）でコミットする。

---

## 次のステップ
*   マイグレーションファイルの作成とデータベース構築。
*   モデル・リレーションの実装。
